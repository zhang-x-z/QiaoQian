(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23d8c498"],{"597b":function(e,t,r){},a0dc:function(e,t,r){"use strict";var n=r("597b"),a=r.n(n);a.a},c1bf:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"face-proc"},[r("el-header",[r("nav-bar",{scopedSlots:e._u([{key:"left",fn:function(){return[r("i",{staticClass:"el-icon-close",on:{click:e.back}})]},proxy:!0},{key:"center",fn:function(){return[r("span",[e._v(e._s(e.currentModule))])]},proxy:!0},{key:"right",fn:function(){return[r("i",{staticClass:"el-icon-check",on:{click:e.finish}})]},proxy:!0}])})],1),r("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.fullScreenLoading,expression:"fullScreenLoading"}],attrs:{"element-loading-text":"处理中...","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[r("div",{staticClass:"img-container"},[r("img",{ref:"image",attrs:{src:e.userImg,id:"image"}})])]),r("el-footer",{staticClass:"tabs"},[r("el-tabs",{attrs:{"tab-position":"bottom"},on:{"tab-click":e.handleClick},model:{value:e.currentModule,callback:function(t){e.currentModule=t},expression:"currentModule"}},[e._l(e.modules,(function(t){return[r("el-tab-pane",{attrs:{label:t,name:t}},[[r("el-radio-group",{staticClass:"sub-modules",on:{change:e.handleSubClick},model:{value:e.currentSubModule,callback:function(t){e.currentSubModule=t},expression:"currentSubModule"}},["瘦脸"!==e.currentModule?r("div",[e._l(e.subModules,(function(t){return[r("el-radio-button",{key:t,attrs:{label:t,size:"mini"}},[e._v(e._s(t))])]}))],2):r("div",[[r("el-radio-button",{attrs:{label:"重置",size:"mini"}},[e._v("重置")])]],2)])]],2)]}))],2)],1)],1)},a=[],i=(r("c740"),r("6259")),s=r("bc3a"),o=r.n(s),u=r("025e");o.a.defaults.baseURL=Object(u["a"])();var c={name:"FaceProc",components:{NavBar:i["a"]},data:function(){return{fullScreenLoading:!1,modules:["磨皮","美白","瘦脸"],subModules:["重置","1级","2级","3级","4级","5级"],currentModule:"瘦脸",currentSubModule:"",userImg:"",savedImg:"",degreeList:[[-1,1,2,3,4,5],[-1,5,10,15,20,25],[-1,1,2,3,4,5]]}},mounted:function(){this.currentModule="磨皮",this.reset()},methods:{back:function(){this.$router.back()},finish:function(){this.$store.commit("saveImg",this.userImg),this.$router.back()},reset:function(){this.userImg=this.$store.state.editedImg,this.savedImg=this.$store.state.editedImg,this.currentSubModule=""},handleClick:function(e){var t=this;if(this.currentSubModule="",this.savedImg=this.userImg,"瘦脸"===this.currentModule){this.fullScreenLoading=!0;var r=new FormData;r.append("editedImg",this.savedImg),o.a.post("imgProc/face_thin/",r).then((function(e){var r=e.data.error_code;0===r?(t.userImg=e.data.img_proc_result,t.savedImg=t.userImg):1008===r&&t.$message.error("出错啦，没有检测到人脸"),t.fullScreenLoading=!1})).catch((function(e){console.log(e),t.$message.error("出错啦，请检查您的网络连接"),t.fullScreenLoading=!1}))}},handleSubClick:function(e){var t=this,r=this.subModules.findIndex((function(e){return e==t.currentSubModule}));if(r<=0)this.reset();else if("磨皮"==this.currentModule){this.fullScreenLoading=!0;var n=new FormData;n.append("buffer_degree",this.degreeList[0][r]),n.append("editedImg",this.savedImg),o.a.post("imgProc/beautify_buffering/",n).then((function(e){var r=e.data.error_code;0===r?t.userImg=e.data.img_proc_result:1008===r&&t.$message.error("出错啦，请稍后再试"),t.fullScreenLoading=!1})).catch((function(e){console.log(e),t.$message.error("出错啦，请检查您的网络连接"),t.fullScreenLoading=!1}))}else if("美白"==this.currentModule){this.fullScreenLoading=!0;var a=new FormData;a.append("white_degree",this.degreeList[1][r]),a.append("editedImg",this.savedImg),o.a.post("imgProc/beautify_white/",a).then((function(e){var r=e.data.error_code;0===r?t.userImg=e.data.img_proc_result:1008===r&&t.$message.error("出错啦，请稍后再试"),t.fullScreenLoading=!1})).catch((function(e){console.log(e),t.$message.error("出错啦，请检查您的网络连接"),t.fullScreenLoading=!1}))}}},activated:function(){this.currentModule="磨皮",this.reset()}},l=c,d=(r("a0dc"),r("2877")),g=Object(d["a"])(l,n,a,!1,null,"7b323f56",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-23d8c498.094f2bb4.js.map