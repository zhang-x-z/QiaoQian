{"version":3,"sources":["webpack:///./src/components/album/AlbumCard.vue?5ab8","webpack:///src/components/album/AlbumCard.vue","webpack:///./src/components/album/AlbumCard.vue?97e9","webpack:///./src/components/album/AlbumCard.vue","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./src/views/Mobile/UserAlbum.vue?c51c","webpack:///src/views/Mobile/UserAlbum.vue","webpack:///./src/views/Mobile/UserAlbum.vue?cb1c","webpack:///./src/views/Mobile/UserAlbum.vue","webpack:///./src/components/album/AlbumCard.vue?5b74","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/Mobile/UserAlbum.vue?d2d4"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","padding","_t","staticStyle","staticClass","staticRenderFns","component","$","$filter","filter","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","length","undefined","on","$event","Back","slot","_v","showAddAlbum","dialogFormVisible","ref","formData","rules","model","value","callback","$$v","$set","expression","addAlbum","albumDialogVisible","albumForm","albumRules","_s","size","date","deleteAlbum","changeName","_l","item","key","id","url","onLoadSuccess","onLoadError","toAlbumMore","name","showAlbumDialog","a","click","scrollbar","fade","interactive","data","albumInfo","albumName","required","trigger","validator","ans","Error","watch","setTimeout","activated","bs","mounted","$store","state","isLogin","params","user_id","user","userID","timeout","error_code","console","log","err","$router","push","components","NavBar","AlbumCard","computed","methods","$refs","nameForm","validate","valid","form","append","back","commit","info","selectedAlbum","i","index","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error"],"mappings":"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","file":"js/chunk-e8b35722.a25f769b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{attrs:{\"body-style\":{ padding: '0px' },\"shadow\":\"always\"}},[_vm._t(\"image\"),_c('div',{staticStyle:{\"padding\":\"14px\"}},[_vm._t(\"title\"),_c('div',{staticClass:\"bottom clearfix\"},[_vm._t(\"describe\"),_vm._t(\"button\")],2)],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-card :body-style=\"{ padding: '0px' }\" shadow=\"always\">\r\n    <slot name=\"image\"></slot>\r\n    <!--<el-image :fit=\"'cover'\" :src=\"albumUrl\" class=\"image\"></el-image>-->\r\n    <div style=\"padding: 14px;\">\r\n      <slot name=\"title\"></slot>\r\n      <!--<span>{{albumName}}</span>-->\r\n      <div class=\"bottom clearfix\">\r\n      <!--<div class=\"bottom\">-->\r\n        <slot name=\"describe\"></slot>\r\n        <slot name=\"button\"></slot>\r\n        <!--<span class=\"date\">{{albumDate + '创建'}}</span>-->\r\n        <!--<i class=\"el-icon-more more-btn\" @click=\"toAlbumMore()\"></i>-->\r\n      </div>\r\n    </div>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  // data () {\r\n  //   return {\r\n  //     store: this.$store\r\n  //   }\r\n  // },\r\n  // props: {\r\n  //   albumId: '',\r\n  //   albumName: '',\r\n  //   albumUrl: '',\r\n  //   albumDate: ''\r\n  // },\r\n  // methods: {\r\n  //   toAlbumMore () {\r\n  //     //TODO: to album details\r\n  //     console.log(this)\r\n  //     console.log(this.albumId)\r\n  //     this.store.commit('changeCurrentAlbum', {\r\n  //       id: this.albumId,\r\n  //       name: this.albumName\r\n  //     })\r\n  //   }\r\n  // }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* .image {\r\n  width: 100%;\r\n  display: block;\r\n} */\r\n\r\n/* .date {\r\n  font-size: 13px;\r\n  color: #999;\r\n} */\r\n\r\n/* .more-btn {\r\n  float: right;\r\n} */\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: '';\r\n}\r\n\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n\r\n.bottom {\r\n  margin-top: 13px;\r\n  line-height: 12px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AlbumCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AlbumCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AlbumCard.vue?vue&type=template&id=41d46507&scoped=true&\"\nimport script from \"./AlbumCard.vue?vue&type=script&lang=js&\"\nexport * from \"./AlbumCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AlbumCard.vue?vue&type=style&index=0&id=41d46507&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41d46507\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"album-wapper\"},[_c('div',{staticClass:\"navbar-wapper\"},[_c('nav-bar',[_c('div',{attrs:{\"slot\":\"left\"},on:{\"click\":function($event){return _vm.Back()}},slot:\"left\"},[_c('i',{staticClass:\"el-icon-caret-left\"})]),_c('div',{attrs:{\"slot\":\"center\"},slot:\"center\"},[_vm._v(\"我的相册\")]),_c('div',{attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('i',{staticClass:\"el-icon-circle-plus\",on:{\"click\":function($event){return _vm.showAddAlbum()}}})])])],1),_c('el-dialog',{attrs:{\"title\":\"添加相册\",\"visible\":_vm.dialogFormVisible,\"width\":\"70%\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"nameForm\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"相册名称\",\"label-width\":'80px',\"prop\":\"albumName\"}},[_c('el-input',{attrs:{\"maxlength\":\"30\",\"autocomplete\":\"off\"},model:{value:(_vm.formData.albumName),callback:function ($$v) {_vm.$set(_vm.formData, \"albumName\", $$v)},expression:\"formData.albumName\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"plain\":\"\"},on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"plain\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addAlbum()}}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"相册信息\",\"visible\":_vm.albumDialogVisible,\"width\":\"70%\"},on:{\"update:visible\":function($event){_vm.albumDialogVisible=$event}}},[_c('el-form',{ref:\"albumForm\",attrs:{\"model\":_vm.albumForm,\"rules\":_vm.albumRules}},[_c('el-form-item',{attrs:{\"label\":\"相册名称\",\"label-width\":'80px',\"prop\":\"name\"}},[_c('el-input',{attrs:{\"maxlength\":\"30\",\"autocomplete\":\"off\"},model:{value:(_vm.albumForm.name),callback:function ($$v) {_vm.$set(_vm.albumForm, \"name\", $$v)},expression:\"albumForm.name\"}})],1)],1),_c('p',{staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(\"照片数量：\"+_vm._s(_vm.albumForm.size))]),_c('p',[_vm._v(\"创建时间：\"+_vm._s(_vm.albumForm.date))]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-popconfirm',{attrs:{\"slot\":\"button\",\"confirmButtonText\":\"确认\",\"cancelButtonText\":\"手抖了\",\"icon\":\"el-icon-warning\",\"iconColor\":\"red\",\"title\":\"确定删除该相册吗？\"},on:{\"onConfirm\":function($event){return _vm.deleteAlbum()}},slot:\"button\"},[_c('el-button',{staticStyle:{\"margin-right\":\"3vh\"},attrs:{\"slot\":\"reference\",\"plain\":\"\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\"删 除\")])],1),_c('el-button',{attrs:{\"plain\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.changeName()}}},[_vm._v(\"确 定\")])],1)],1),_c('div',{staticClass:\"album-content\"},[_c('div',{ref:\"scroll\",staticClass:\"scroll-wapper\"},[_c('div',{staticClass:\"scroll-content\"},_vm._l((_vm.albumInfo),function(item){return _c('album-card',{key:item.id,staticStyle:{\"margin-bottom\":\"16px\"}},[_c('el-image',{staticClass:\"image\",attrs:{\"slot\":\"image\",\"fit\":'cover',\"src\":item.url},on:{\"load\":_vm.onLoadSuccess,\"error\":_vm.onLoadError,\"click\":function($event){return _vm.toAlbumMore(item)}},slot:\"image\"}),_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(item.name))]),_c('span',{staticClass:\"date\",attrs:{\"slot\":\"describe\"},slot:\"describe\"},[_vm._v(_vm._s(item.date + '创建'))]),_c('i',{staticClass:\"el-icon-more more-btn\",attrs:{\"slot\":\"button\"},on:{\"click\":function($event){return _vm.showAlbumDialog(item)}},slot:\"button\"})],1)}),1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"album-wapper\">\r\n    <div class=\"navbar-wapper\">\r\n      <nav-bar>\r\n        <div slot=\"left\" @click=\"Back()\">\r\n          <i class=\"el-icon-caret-left\"></i>\r\n        </div>\r\n        <div slot=\"center\">我的相册</div>\r\n        <div slot=\"right\">\r\n          <i class=\"el-icon-circle-plus\" @click=\"showAddAlbum()\"></i>\r\n        </div>\r\n      </nav-bar>\r\n    </div>\r\n    <!--add album dialog-->\r\n    <el-dialog title=\"添加相册\" :visible.sync=\"dialogFormVisible\" width=\"70%\">\r\n      <el-form :model=\"formData\" :rules=\"rules\" ref=\"nameForm\">\r\n        <el-form-item label=\"相册名称\" :label-width=\"'80px'\" prop=\"albumName\">\r\n          <el-input maxlength=\"30\" v-model=\"formData.albumName\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button plain @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button plain type=\"primary\" @click=\"addAlbum()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!--add album dialog-->\r\n    <el-dialog title=\"相册信息\" :visible.sync=\"albumDialogVisible\" width=\"70%\">\r\n      <el-form :model=\"albumForm\" :rules=\"albumRules\" ref=\"albumForm\">\r\n        <el-form-item label=\"相册名称\" :label-width=\"'80px'\" prop=\"name\">\r\n          <el-input maxlength=\"30\" v-model=\"albumForm.name\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <p style=\"margin-bottom: 10px;\">照片数量：{{albumForm.size}}</p>\r\n      <p>创建时间：{{albumForm.date}}</p>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-popconfirm\r\n          confirmButtonText=\"确认\"\r\n          cancelButtonText=\"手抖了\"\r\n          icon=\"el-icon-warning\"\r\n          iconColor=\"red\"\r\n          title=\"确定删除该相册吗？\"\r\n          slot=\"button\"\r\n          @onConfirm=\"deleteAlbum()\"\r\n        >\r\n          <el-button plain slot=\"reference\" style=\"margin-right:3vh;\" type=\"danger\">删 除</el-button>\r\n        </el-popconfirm>\r\n        <el-button plain type=\"primary\" @click=\"changeName()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <div class=\"album-content\">\r\n      <div class=\"scroll-wapper\" ref=\"scroll\">\r\n        <div class=\"scroll-content\">\r\n          <!-- <el-image v-for=\"item in albumInfo\" :key=\"item.id\" :src=\"item.url\"></el-image> -->\r\n          <album-card v-for=\"item in albumInfo\" :key=\"item.id\" style=\"margin-bottom:16px;\">\r\n            <el-image\r\n              :fit=\"'cover'\"\r\n              :src=\"item.url\"\r\n              @load=\"onLoadSuccess\"\r\n              @error=\"onLoadError\"\r\n              slot=\"image\"\r\n              class=\"image\"\r\n              @click=\"toAlbumMore(item)\"\r\n            ></el-image>\r\n            <span slot=\"title\">{{item.name}}</span>\r\n            <span slot=\"describe\" class=\"date\">{{item.date + '创建'}}</span>\r\n            <i slot=\"button\" class=\"el-icon-more more-btn\" @click=\"showAlbumDialog(item)\"></i>\r\n          </album-card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- <div class=\"album-content\" v-infinite-scroll=\"load\" infinite-scroll-disabled=\"disabled\">\r\n      <el-row v-for=\"i in count\" :key=\"i\" style=\"margin-bottom: 20px;\">\r\n        <el-col>\r\n          <album-card>\r\n            <el-image\r\n              :fit=\"'cover'\"\r\n              :src=\"albumInfo[i - 1].url\"\r\n              slot=\"image\"\r\n              class=\"image\"\r\n              lazy\r\n              @click=\"toAlbumMore(albumInfo[i - 1])\"\r\n            ></el-image>\r\n            <span slot=\"title\">{{albumInfo[i - 1].name}}</span>\r\n            <span slot=\"describe\" class=\"date\">{{albumInfo[i - 1].date + '创建'}}</span>\r\n            <el-popconfirm\r\n              confirmButtonText=\"确认\"\r\n              cancelButtonText=\"手抖了\"\r\n              icon=\"el-icon-warning\"\r\n              iconColor=\"red\"\r\n              title=\"确定删除该相册吗？\"\r\n              slot=\"button\"\r\n            >\r\n              <i slot=\"reference\" class=\"el-icon-remove more-btn\"></i>\r\n            </el-popconfirm>\r\n          </album-card>\r\n        </el-col>\r\n      </el-row>\r\n      <div v-if=\"loading\" class=\"load-more\">\r\n        <i class=\"el-icon-loading\"></i>\r\n        <span>加载中...</span>\r\n      </div>\r\n      <p v-if=\"noMore\" class=\"no-more\">没有更多了</p>\r\n    </div>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from '@/components/common/Mobile/NavBar'\r\nimport AlbumCard from '@/components/album/AlbumCard'\r\nimport BScroll from 'better-scroll'\r\nimport axios from 'axios'\r\nimport { baseurl } from '@/utils.js'\r\n//TODO: need to change\r\naxios.defaults.baseURL = baseurl()\r\n\r\nconst options = {\r\n  click: true,\r\n  scrollbar: {\r\n    fade: true,\r\n    interactive: true\r\n  }\r\n}\r\n\r\nexport default {\r\n  name: 'user-album',\r\n  data () {\r\n    return {\r\n      albumInfo: [],\r\n      dialogFormVisible: false,\r\n      albumDialogVisible: false,\r\n      formData: {\r\n        albumName: ''\r\n      },\r\n      albumForm: {\r\n        id: '',\r\n        name: '',\r\n        size: '',\r\n        date: ''\r\n      },\r\n      albumRules: {\r\n        name: [{\r\n          required: true,\r\n          trigger: 'blur',\r\n          validator: (rule, value, callback) => {\r\n            if (!value) {\r\n              callback(new Error('相册名不能为空！'))\r\n            } else {\r\n              //XXX: test\r\n              let curr_id = this.albumForm.id\r\n              let ans = this.albumInfo.filter(item => { return (item.name === value) && (item.id !== curr_id) }).length\r\n              if (ans !== 0) {\r\n                callback(new Error('您已经有该名称的相册啦'))\r\n              } else {\r\n                callback()\r\n              }\r\n            }\r\n          }\r\n        }]\r\n      },\r\n      rules: {\r\n        albumName: [\r\n          {\r\n            required: true,\r\n            trggier: 'blur',\r\n            validator: (rule, value, callback) => {\r\n              if (!value) {\r\n                callback(new Error('相册名不能为空！'))\r\n              } else {\r\n                if (this.albumInfo.filter(item => { return item.name === value }).length !== 0) {\r\n                  callback(new Error('您已经有该名称的相册啦'))\r\n                } else {\r\n                  callback()\r\n                }\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    albumInfo () {\r\n      setTimeout(() => {\r\n        // console.log('refresh')\r\n        this.bs.refresh()\r\n      }, 20)\r\n    }\r\n  },\r\n  activated () {\r\n    if (this.bs) {\r\n      setTimeout(() => {\r\n        this.bs.refresh()\r\n      }, 20)\r\n    }\r\n  },\r\n  mounted () {\r\n    //XXX: test\r\n    // console.log('user album mounted')\r\n    if (!this.$store.state.isLogin) {\r\n      this.$router.push('/')\r\n      return\r\n    }\r\n    //TODO: axios request\r\n    axios.get('user/getAllAlbumsInfo/', {\r\n      params: {\r\n        user_id: this.$store.state.user.userID\r\n      },\r\n      timeout: 5000\r\n    }).then(res => res.data).then(data => {\r\n      let error_code = data.error_code\r\n      if (error_code === 0) {\r\n        this.albumInfo = data.AlbumsInfo\r\n      } else if (error_code === 1006) {\r\n        this.$message.error('数据获取失败，请稍后再试')\r\n      }\r\n    }).catch(err => {\r\n      console.log(err)\r\n      this.$message.error('数据获取失败，请检查您的网络连接')\r\n    })\r\n    setTimeout(() => {\r\n      this.bs = new BScroll(this.$refs.scroll, options)\r\n      // console.log(this.bs)\r\n    }, 20)\r\n  },\r\n  components: {\r\n    NavBar,\r\n    AlbumCard\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    showAddAlbum () {\r\n      this.formData.albumName = ''\r\n      this.dialogFormVisible = true\r\n    },\r\n    onLoadSuccess (e) {\r\n      // console.log('load success')\r\n      setTimeout(() => {\r\n        // console.log('refresh')\r\n        this.bs.refresh()\r\n      }, 20)\r\n    },\r\n    onLoadError (e) {\r\n      // console.log('load error')\r\n      setTimeout(() => {\r\n        // console.log('refresh')\r\n        this.bs.refresh()\r\n      }, 20)\r\n    },\r\n    addAlbum () {\r\n      this.$refs.nameForm.validate(valid => {\r\n        if (valid) {\r\n          // TODO: add\r\n          // console.log('add album')\r\n          let form = new FormData()\r\n          form.append('album_name', this.formData.albumName)\r\n          form.append('user_id', this.$store.state.user.userID)\r\n          axios.post('user/add-album/', form, {\r\n            timeout: 2000\r\n          }).then(res => {\r\n            let error_code = res.data.error_code\r\n            if (error_code === 0) {\r\n              let new_info = res.data.album_info\r\n              this.bs.scrollTo(0, 0, 100)\r\n              // console.log(new_info)\r\n              this.albumInfo.unshift(new_info)\r\n              this.$message.success('添加成功!')\r\n              this.dialogFormVisible = false\r\n            } else if (error_code === 1006) {\r\n              this.$message.error('添加失败，请您稍后再试~')\r\n            }\r\n          }).catch(err => {\r\n            console.log(err)\r\n            this.$message.error('添加失败，请您检查您的网络连接')\r\n          })\r\n        } else {\r\n          this.$message.error('您输入的信息有误!')\r\n        }\r\n      })\r\n    },\r\n    Back () {\r\n      // TODO: judge length of history\r\n      this.$router.back(-1)\r\n      // console.log('back')\r\n    },\r\n    toAlbumMore (info) {\r\n      // TODO: need to fix\r\n      this.$store.commit('changeCurrentAlbum', info)\r\n      this.$router.push('/album-page')\r\n    },\r\n    changeName () {\r\n      this.$refs.albumForm.validate(valid => {\r\n        if (valid) {\r\n          if (this.albumForm.name === this.selectedAlbum.name) {\r\n            this.dialogFormVisible = false\r\n            return\r\n          }\r\n\r\n          // TODO: change album name via vuex (axios)\r\n          let form = new FormData()\r\n          form.append('user_id', this.$store.state.user.userID)\r\n          form.append('album_id', this.albumForm.id)\r\n          form.append('album_name', this.selectedAlbum.name)\r\n          form.append('album_new_name', this.albumForm.name)\r\n          axios.post('user/change-album-name/', form, {\r\n            timeout: 2000\r\n          }).then(res => res.data).then(data => {\r\n            let error_code = data.error_code\r\n            if (error_code === 0) {\r\n              this.selectedAlbum.name = this.albumForm.name\r\n              this.albumDialogVisible = false\r\n              this.$message.success('修改成功!')\r\n            } else if (error_code === 1006) {\r\n              this.$message.error('修改失败，请您稍后再试')\r\n            }\r\n          }).catch(err => {\r\n            console.log(err)\r\n            this.$message.error('修改失败，请检查您的网络连接')\r\n          })\r\n        } else {\r\n          this.$message.error('您输入的信息有误!')\r\n        }\r\n      })\r\n    },\r\n    showAlbumDialog (item) {\r\n      // console.log(item)\r\n      this.albumForm.name = item.name\r\n      this.albumForm.id = item.id\r\n      this.albumForm.size = item.size\r\n      this.albumForm.date = item.date\r\n      this.selectedAlbum = item\r\n      this.albumDialogVisible = true\r\n    },\r\n    deleteAlbum () {\r\n      // TODO: axios requests\r\n      // console.log(this.albumInfo)\r\n      let index = 0\r\n      for (let i = 0; i < this.albumInfo.length; i++) {\r\n        if (this.selectedAlbum.id === this.albumInfo[i].id) {\r\n          index = i\r\n          break\r\n        }\r\n      }\r\n\r\n      let form = new FormData()\r\n      form.append('user_id', this.$store.state.user.userID)\r\n      form.append('album_name', this.selectedAlbum.name)\r\n      axios.post('user/delete-album/', form, {\r\n        timeout: 2000\r\n      }).then(res => {\r\n        let error_code = res.data.error_code\r\n        if (error_code === 0) {\r\n          this.$message.success('删除成功!')\r\n          this.albumInfo.splice(index, 1)\r\n          this.albumDialogVisible = false\r\n        } else if (error_code === 1006) {\r\n          this.$message.error('删除失败，请稍后再试')\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n        this.$message.error('删除失败，请检查您的网络连接')\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n.album-wapper {\r\n  position: relative;\r\n  height: 100%;\r\n  width: 100%;\r\n  background-color: #eeeeee;\r\n}\r\n\r\n.album-content {\r\n  height: 93vh;\r\n}\r\n\r\n.scroll-wapper {\r\n  height: 93vh;\r\n  overflow: hidden;\r\n}\r\n\r\n.scroll-content {\r\n  padding: 3vh 3vh 3vh 3vh;\r\n}\r\n\r\n.navbar-wapper {\r\n  background-color: rgba(250, 251, 252, 224);\r\n  position: sticky;\r\n  position: -webkit-sticky;\r\n  top: 0;\r\n  z-index: 100;\r\n  font-size: 22px;\r\n}\r\n\r\n.load-more {\r\n  text-align: center;\r\n  font-size: 13px;\r\n  padding-bottom: 7px;\r\n}\r\n\r\n.no-more {\r\n  padding-bottom: 7px;\r\n  text-align: center;\r\n  font-size: 13px;\r\n}\r\n\r\n.image {\r\n  width: 100%;\r\n  display: block;\r\n}\r\n\r\n.date {\r\n  font-size: 13px;\r\n  color: #999;\r\n}\r\n\r\n.more-btn {\r\n  float: right;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAlbum.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAlbum.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserAlbum.vue?vue&type=template&id=5c897a56&scoped=true&\"\nimport script from \"./UserAlbum.vue?vue&type=script&lang=js&\"\nexport * from \"./UserAlbum.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserAlbum.vue?vue&type=style&index=0&id=5c897a56&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c897a56\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AlbumCard.vue?vue&type=style&index=0&id=41d46507&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AlbumCard.vue?vue&type=style&index=0&id=41d46507&scoped=true&lang=css&\"","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAlbum.vue?vue&type=style&index=0&id=5c897a56&lang=css&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAlbum.vue?vue&type=style&index=0&id=5c897a56&lang=css&scoped=true&\""],"sourceRoot":""}