{"version":3,"sources":["webpack:///./src/views/Mobile/process/EditProc.vue?7765","webpack:///src/views/Mobile/process/EditProc.vue","webpack:///./src/views/Mobile/process/EditProc.vue?eaed","webpack:///./src/views/Mobile/process/EditProc.vue","webpack:///./src/views/Mobile/process/EditProc.vue?a2c7","webpack:///./src/components/common/Mobile/NavBar.vue?bb74","webpack:///src/components/common/Mobile/NavBar.vue","webpack:///./src/components/common/Mobile/NavBar.vue?39ab","webpack:///./src/components/common/Mobile/NavBar.vue","webpack:///./src/components/common/Mobile/NavBar.vue?f78b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","scopedSlots","_u","key","fn","on","back","proxy","_v","_s","currentModule","finish","ref","attrs","containerWidth","containerHeight","handleClick","model","value","callback","$$v","expression","_l","item","index","name","handleSubClick","currentSubModule","modules","subitem","staticRenderFns","component","_t"],"mappings":"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","file":"js/chunk-f4c11a04.b8fc1d6f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"edit-proc\"},[_c('el-header',[_c('nav-bar',{scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('i',{staticClass:\"el-icon-close\",on:{\"click\":_vm.back}})]},proxy:true},{key:\"center\",fn:function(){return [_c('span',[_vm._v(_vm._s(_vm.currentModule))])]},proxy:true},{key:\"right\",fn:function(){return [_c('i',{staticClass:\"el-icon-check\",on:{\"click\":_vm.finish}})]},proxy:true}])})],1),_c('el-main',[_c('div',{staticClass:\"img-container\"},[_c('my-cropper',{ref:\"cropper\",attrs:{\"id\":\"cropper-cpn\",\"width\":_vm.containerWidth,\"height\":_vm.containerHeight}})],1)]),_c('el-footer',{staticClass:\"tabs\"},[_c('el-tabs',{attrs:{\"tab-position\":\"bottom\"},on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.currentModule),callback:function ($$v) {_vm.currentModule=$$v},expression:\"currentModule\"}},[_vm._l((_vm.modules),function(item,index){return [_c('el-tab-pane',{attrs:{\"label\":item.name,\"name\":item.name}},[[_c('el-radio-group',{staticClass:\"sub-modules\",on:{\"change\":_vm.handleSubClick},model:{value:(_vm.currentSubModule),callback:function ($$v) {_vm.currentSubModule=$$v},expression:\"currentSubModule\"}},[_vm._l((_vm.modules[index].subModules),function(subitem){return [_c('el-radio-button',{attrs:{\"label\":subitem,\"size\":\"mini\"}},[_vm._v(_vm._s(subitem))])]})],2)]],2)]})],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"edit-proc\">\r\n    <el-header>\r\n      <nav-bar>\r\n        <template v-slot:left>\r\n          <i class=\"el-icon-close\" @click=\"back\"></i>\r\n        </template>\r\n        <template v-slot:center>\r\n          <span>{{currentModule}}</span>\r\n        </template>\r\n        <template v-slot:right>\r\n          <i class=\"el-icon-check\" @click=\"finish\"></i>\r\n        </template>\r\n      </nav-bar>\r\n    </el-header>\r\n    <el-main>\r\n      <div class=\"img-container\">\r\n        <my-cropper id=\"cropper-cpn\" :width=\"containerWidth\" :height=\"containerHeight\" ref=\"cropper\">\r\n        </my-cropper>\r\n      </div>\r\n    </el-main>\r\n    <el-footer class=\"tabs\">\r\n      <el-tabs tab-position=\"bottom\" @tab-click=\"handleClick\" v-model=\"currentModule\">\r\n        <template v-for=\"(item,index) in modules\">\r\n          <el-tab-pane :label=\"item.name\" :name=\"item.name\">\r\n            <template>\r\n              <el-radio-group class=\"sub-modules\" v-model=\"currentSubModule\" @change=handleSubClick>\r\n                <template v-for=\"subitem in modules[index].subModules\">\r\n                  <el-radio-button :label=\"subitem\" size=\"mini\">{{subitem}}</el-radio-button>\r\n                </template>\r\n              </el-radio-group>\r\n            </template>\r\n          </el-tab-pane>\r\n        </template>\r\n      </el-tabs>\r\n    </el-footer>\r\n  </div>\r\n</template>\r\n<script>\r\n  import NavBar from 'components/common/Mobile/NavBar.vue'\r\n  import ProcessItem from 'components/process/ProcessItem.vue'\r\n  import MyCropper from 'components/process/Cropper.vue';\r\n  export default {\r\n    name: \"EditProc\",\r\n    components: {\r\n      NavBar,\r\n      ProcessItem,\r\n      MyCropper\r\n    },\r\n    data() {\r\n      return {\r\n        modules: [\r\n          { name: '剪裁', subModules: ['重置', '自由', '1:1', '2:3', '3:2', '3:4', '4:3', '9:16', '16:9'] },\r\n          { name: '旋转', subModules: ['重置', '+30°', '-30°', '+45°', '-45°', '+90°', '-90°'] }\r\n        ],\r\n        currentModule: '剪裁',\r\n        currentSubModule: '自由',\r\n        subModules: [[-1, 0, 1, 2 / 3, 3 / 2, 3 / 4, 4 / 3, 9 / 16, 16 / 9], [-1, 30, -30, 45, -45, 90, -90]]\r\n      };\r\n    },\r\n    computed: {\r\n      containerWidth() {\r\n        let container = document.getElementsByClassName('img-container');\r\n        return window.getComputedStyle(container[0]).width;\r\n      },\r\n      containerHeight() {\r\n        let container = document.getElementsByClassName('img-container');\r\n        return window.getComputedStyle(container[0]).height;\r\n      },\r\n    },\r\n    methods: {\r\n      back() {\r\n        // 直接返回上层\r\n        this.$router.back();\r\n        // console.log('取消操作');\r\n      },\r\n      finish() {\r\n        // TODO：保存图片效果到store\r\n        this.$refs.cropper.save();\r\n        // console.log('保存图片成功');\r\n        this.$router.back();\r\n      },\r\n      handleClick(tab) {\r\n        // 响应父栏点击\r\n        // 之后优化为单页面富应用，现阶段直接切换页面\r\n        // console.log('点击底部的 ' + tab.label);\r\n        this.$refs.cropper.destroy();\r\n        // console.log(this.currentModule);\r\n        if (this.currentModule == '剪裁') {\r\n          this.$refs.cropper.init();\r\n          // console.log(this.$refs.cropper.getCanvasData());\r\n          this.currentSubModule = '自由';\r\n        }\r\n        else {\r\n          this.$refs.cropper.initRotate();\r\n        }\r\n      },\r\n      handleSubClick(label) {\r\n        // console.log('currentSubModule:' + this.currentSubModule);\r\n        if (this.currentModule == '剪裁') {\r\n          // console.log(label);\r\n          let index = this.modules[0].subModules.findIndex(value => value == label);\r\n          // console.log('index:' + index);\r\n          if (index == 0) { //重置\r\n            this.$refs.cropper.reset();\r\n            this.$refs.cropper.setAspectRatio(0);\r\n            this.currentSubModule = '自由';\r\n          }\r\n          else {\r\n            this.$refs.cropper.setAspectRatio(this.subModules[0][index]);\r\n          }\r\n        }\r\n        else {\r\n          let index = this.modules[1].subModules.findIndex(value => value == label);\r\n          // console.log('index=' + index);\r\n          if (index == 0) {\r\n            this.$refs.cropper.reset();\r\n          }\r\n          else {\r\n            this.$refs.cropper.rotate(this.subModules[1][index]);\r\n          }\r\n          this.currentSubModule = '';\r\n        }\r\n\r\n      }\r\n    },\r\n    beforeRouteLeave(to, from, next) {\r\n      this.$refs.cropper.destroy();\r\n      next()\r\n    },\r\n    activated() {\r\n      this.$refs.cropper.init();\r\n\r\n      this.currentModule = '剪裁';\r\n      this.currentSubModule = '自由';\r\n      // console.log('activated');\r\n    },\r\n  }\r\n</script>\r\n<style lang=\"css\" scoped>\r\n  .edit-proc {\r\n    /* 默认值居然不是100%高度 */\r\n    height: 100%;\r\n  }\r\n\r\n  .el-header {\r\n    padding: 0;\r\n  }\r\n\r\n  .el-main {\r\n    height: calc(90vh - 80px)\r\n  }\r\n\r\n  .img-container {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n    object-fit: scale-down;\r\n    margin:0 auto;\r\n  }\r\n\r\n\r\n  #image {\r\n    display: block;\r\n    /* This rule is very important, please don't ignore this */\r\n    max-height: 100%;\r\n    /* object-fit: scale-down; */\r\n    margin: 0 auto;\r\n    height: 100%;\r\n    width: 100%;\r\n  }\r\n\r\n  #cropper-cpn {\r\n    max-height: 100%;\r\n    object-fit: scale-down;\r\n  }\r\n\r\n  .el-footer {\r\n    position: absolute;\r\n    bottom: 21px;\r\n    max-width: 100%;\r\n\r\n  }\r\n\r\n  .sub-modules {\r\n    display: flex;\r\n    overflow: hidden;\r\n    overflow-x: scroll;\r\n\r\n  }\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditProc.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditProc.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditProc.vue?vue&type=template&id=640bdc77&scoped=true&\"\nimport script from \"./EditProc.vue?vue&type=script&lang=js&\"\nexport * from \"./EditProc.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditProc.vue?vue&type=style&index=0&id=640bdc77&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"640bdc77\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditProc.vue?vue&type=style&index=0&id=640bdc77&lang=css&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditProc.vue?vue&type=style&index=0&id=640bdc77&lang=css&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"navbar\"},[_c('div',{staticClass:\"left\"},[_vm._t(\"left\")],2),_c('div',{staticClass:\"center\"},[_vm._t(\"center\")],2),_c('div',{staticClass:\"right\"},[_vm._t(\"right\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"navbar\">\r\n    <div class=\"left\">\r\n      <slot name=\"left\"></slot>\r\n    </div>\r\n    <div class=\"center\">\r\n      <slot name=\"center\"></slot>\r\n    </div>\r\n    <div class=\"right\">\r\n      <slot name=\"right\"></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'NavBar'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.navbar {\r\n  display: flex;\r\n  height: 7vh;\r\n  line-height: 7vh;\r\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1);\r\n  text-align: center;\r\n}\r\n\r\n.left,\r\n.right {\r\n  width: 60px;\r\n}\r\n\r\n.center {\r\n  flex: 1;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NavBar.vue?vue&type=template&id=88a04806&scoped=true&\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js&\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NavBar.vue?vue&type=style&index=0&id=88a04806&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"88a04806\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=style&index=0&id=88a04806&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=style&index=0&id=88a04806&scoped=true&lang=css&\""],"sourceRoot":""}