(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7a0fa98"],{"4e30":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"spliceview-wapper"},[s("div",{staticClass:"navbar-wapper"},[s("nav-bar",{scopedSlots:e._u([{key:"left",fn:function(){return[s("i",{staticClass:"el-icon-back",on:{click:e.back}})]},proxy:!0},{key:"center",fn:function(){return[s("span",[e._v("全景拼接")])]},proxy:!0},{key:"right",fn:function(){return[s("i",{staticClass:"el-icon-check",on:{click:e.finish}})]},proxy:!0}])})],1),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fullScreenLoading,expression:"fullScreenLoading"}],attrs:{"element-loading-text":"处理中...","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[s("div",{staticClass:"result-wapper"},[e.hasRes?s("el-image",{staticStyle:{width:"96vw",height:"60vh"},attrs:{fit:"scale-down",src:e.res_url}}):e._e()],1)]),s("div",{ref:"scroll",staticClass:"scroll-wapper"},[s("div",{staticClass:"scroll-content"},e._l(e.imgs,(function(t,i){return s("el-image",{key:i,staticStyle:{height:"15vh",width:"15vh","margin-left":"2vw","margin-right":"2vw","margin-top":"2vh"},attrs:{fit:"cover",src:t},on:{load:e.handleLoad,error:e.handleError}})})),1)]),s("div",{staticClass:"buttons-wapper"},[s("el-upload",{staticClass:"upload",attrs:{action:"#",limit:10,"on-change":e.handleChange,"on-exceed":e.handleExceed,"auto-upload":!1,"show-file-list":!1}},[s("el-button",{staticStyle:{height:"7vh",width:"48vw","font-size":"20px"},attrs:{slot:"trigger",plain:""},slot:"trigger"},[e._v("上传图片")])],1),s("el-button",{staticStyle:{height:"7vh",width:"48vw","font-size":"20px"},attrs:{plain:""},on:{click:e.splice}},[e._v("开始转换")])],1)])},n=[],a=(s("a434"),s("6259")),r=s("1fba"),o=s("bc3a"),c=s.n(o),l=s("025e");c.a.defaults.baseURL=Object(l["a"])();var u={scrollX:!0,scrollY:!1},h={data:function(){return{imgs:[],fullScreenLoading:!1,hasRes:!1,res_url:""}},computed:{imgs_num:function(){return this.imgs.length}},components:{NavBar:a["a"]},mounted:function(){var e=this;setTimeout((function(){e.bs=new r["a"](e.$refs.scroll,u)}),20)},activated:function(){var e=this;this.imgs.splice(0,this.imgs.length),this.bs&&setTimeout((function(){e.bs.refresh()}),20)},methods:{back:function(){this.$router.back()},finish:function(){if(this.hasRes){var e=new Date,t=document.createElement("a");t.href=this.res_url,t.setAttribute("download","处理结果-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getHours()+e.getMinutes()+e.getSeconds()),t.click()}else this.$message.error("您还没有进行处理哦")},handleExceed:function(){this.$message.error("最多选择十个文件哦")},handleLoad:function(){var e=this;setTimeout((function(){e.bs.refresh()}),20)},handleError:function(){var e=this;this.$message.error("上传失败!"),setTimeout((function(){e.bs.refresh()}),20)},handleChange:function(e,t){var s=this,i=new FileReader;i.readAsDataURL(e.raw),i.onload=function(e){var t=e.target.result;s.imgs.push(t)}},splice:function(){var e=this;this.imgs_num>=2?(this.fullScreenLoading=!0,c()({url:"imgProc/stitch/",method:"post",data:JSON.stringify({img_num:this.imgs_num,editedImg:this.imgs})}).then((function(t){var s=t.data.error_code;1008===s?e.$message.error("处理失败，请稍后再试"):0===s&&(e.res_url=t.data.img_proc_result,e.hasRes=!0,e.imgs.splice(0,e.imgs.length),setTimeout((function(){e.bs.refresh()}),20),e.$message.success("处理成功!")),e.fullScreenLoading=!1})).catch((function(t){e.$message.error("出错了，请检查您的网络连接"),e.fullScreenLoading=!1}))):this.$message.error("请至少选择两张图片!")}}},d=h,g=(s("8737"),s("2877")),f=Object(g["a"])(d,i,n,!1,null,"28257228",null);t["default"]=f.exports},"84bb":function(e,t,s){},8737:function(e,t,s){"use strict";var i=s("84bb"),n=s.n(i);n.a}}]);
//# sourceMappingURL=chunk-f7a0fa98.591e0c3e.js.map